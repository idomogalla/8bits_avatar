function CanvasSaver(f){this.url=f;this.savePNG=function(e,d){if(e&&f){d=d||"picture";var a=e.toDataURL("image/png"),a=a.substr(a.indexOf(",")+1).toString(),b=document.createElement("input");b.setAttribute("name","imgdata");b.setAttribute("value",a);b.setAttribute("type","hidden");a=document.createElement("input");a.setAttribute("name","name");a.setAttribute("value",d+".png");var c=document.createElement("form");c.method="post";c.action=f;c.appendChild(b);c.appendChild(a);document.body.appendChild(c);
c.submit();document.body.removeChild(c)}};this.generateButton=function(e,d,a){var b=document.createElement("button"),c=this;b.innerHTML=e;b.style["class"]="canvassaver";b.addEventListener("click",function(){c.savePNG(d,a)},!1);document.body.appendChild(b);return b}};